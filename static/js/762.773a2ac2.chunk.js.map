{"version":3,"file":"static/js/762.773a2ac2.chunk.js","mappings":"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","sources":["webpack://kinopoisk/./src/1PAGES/PrivatePages/Categories/CategoryPage/CategoryPage.module.css?8508","HOOKS/useThrottle.jsx","1PAGES/PrivatePages/Categories/CategoryPage/CategoryPage.jsx","webpack://kinopoisk/./src/3COMPONENTS/Card/Card.module.css?6e51","3COMPONENTS/Card/Card.jsx","webpack://kinopoisk/./src/2MODULES/RenderMovies/RenderMovies.module.css?afb2","2MODULES/RenderMovies/RenderMovies.jsx","CONSTANTS/CONSTANTS.jsx"],"sourcesContent":["// extracted by mini-css-extract-plugin\nexport default {\"categoryPageWrapper\":\"CategoryPage_categoryPageWrapper__E5+BK\",\"categoryPageWrapperInset\":\"CategoryPage_categoryPageWrapperInset__YE8jz\"};","const useThrottle = () => {\r\n    function throttle(ms, fc) {\r\n        var isThrottled = false;\r\n        var savedArgs;\r\n        var savedThis;\r\n\r\n        return function wrapper(){\r\n            if (isThrottled) {\r\n                savedArgs = arguments;\r\n                savedThis = this;\r\n                return;\r\n            }\r\n\r\n            isThrottled = true;\r\n\r\n            fc.apply(this, arguments);\r\n\r\n            setTimeout(() => {\r\n                if(savedArgs){\r\n                    wrapper.apply(savedThis, savedArgs);\r\n                    savedArgs = savedThis = null;\r\n                }\r\n                isThrottled = false;\r\n            }, ms)\r\n        }\r\n    }\r\n\r\n    return throttle;\r\n};\r\n\r\nexport default useThrottle;","import { useParams } from \"react-router-dom\";\nimport { LIMIT, TRANSLATOR_RU_TO_EN } from \"../../../../CONSTANTS/CONSTANTS\";\nimport { useEffect, useState } from \"react\";\nimport { limitToFirst, onValue, orderByChild, query, ref, startAt } from \"firebase/database\";\nimport { database } from \"../../../../FireBase/FireBase\";\nimport RenderMovies from \"../../../../2MODULES/RenderMovies/RenderMovies\";\nimport cl from \"./CategoryPage.module.css\";\nimport useThrottle from \"../../../../HOOKS/useThrottle\";\nimport MainSpinner from \"../../../../4UI/Spinner/MainSpinner/MainSpinner\";\n\nconst CategoryPage = () => {\n\n    const param = useParams();\n    const category = TRANSLATOR_RU_TO_EN[param.category];\n\n\n    const [data, setData] = useState([]);\n    const [nextPage, setNextPage] = useState(0);\n    const [fetching, setFetching] = useState(true);\n\n    const throttle = useThrottle();\n\n    const limit = LIMIT;\n    const boundary = 200;\n\n    const getData = throttle(100, function () {\n        setFetching(false)\n        const cat = ref(database, `/Movies/Cateogries/${category}`);\n        const paginationRef = query(cat, limitToFirst(limit), startAt(nextPage), orderByChild('id'))\n        onValue(paginationRef, (snapshot) => {\n            if (snapshot.exists()) {\n                setNextPage(prev => prev + limit)\n                setData(prev => prev.concat(Object.values(snapshot.val())))\n            }\n            setFetching(true)\n        })\n    });\n\n    const handleScrollRequest = function () {\n        const scrollHeight = Math.max(\n            document.body.scrollHeight, document.documentElement.scrollHeight,\n            document.body.offsetHeight, document.documentElement.offsetHeight,\n            document.body.clientHeight, document.documentElement.clientHeight\n        );\n        const scrollCurrent = document.documentElement.scrollTop + document.documentElement.clientHeight;\n\n        if ((scrollHeight - boundary <= scrollCurrent) && fetching) {\n            getData()\n        }\n    };\n\n    useEffect(() => {\n        handleScrollRequest()\n    }, []);\n\n    useEffect(() => {\n\n        window.addEventListener('scroll', handleScrollRequest)\n\n        return () => {\n            window.removeEventListener('scroll', handleScrollRequest)\n\n        };\n    }, [nextPage, fetching])\n\n    return (\n        <>\n            <div className={cl.categoryPageWrapper}>\n                <div className={cl.categoryPageWrapperInset}>\n                    <h2>{param.category}</h2>\n                    <RenderMovies data={data} />\n                </div>\n            </div>\n            {fetching ? null :\n                <div className={cl.spinnerWrapper}>\n                    <MainSpinner className={cl.loader} />\n                </div>\n            }\n        </>\n    );\n};\n\n\n\nexport default CategoryPage;","// extracted by mini-css-extract-plugin\nexport default {\"cardWrapper\":\"Card_cardWrapper__RrRk2\",\"cardAnim\":\"Card_cardAnim__M+5lz\",\"cardDescWrapper\":\"Card_cardDescWrapper__Nm3Gv\",\"img\":\"Card_img__uYqII\",\"imgWrapper\":\"Card_imgWrapper__IUoum\",\"inSubscribe\":\"Card_inSubscribe__LEttH\"};","\nimport cl from \"./Card.module.css\"\n\n\n\nconst Card = ({ img, title, inSub, rating }) => {\n\n\n    return (\n        <div className={cl.cardWrapper}>\n            {/* Отображение рейтинга и картинки */}\n            <div className={cl.imgWrapper}>\n                <span>★ {rating.toString().length === 1 ? rating + \".0\" : rating}</span>\n                <img src={img} alt=\"card-img\" className={cl.img} />\n            </div>\n\n            {/* Отображение названия фильма и его состояние */}\n            <div className={cl.cardDescWrapper}>\n                <div className={cl.titleWrapper}>\n                    <div className={cl.titleShadow}></div>\n                    <h4>{title}</h4>\n                </div>\n                <p className={cl.inSubscribe}>{inSub ? \"В подписке\" : \"Бесплатно\"}</p>\n            </div>\n        </div>\n    );\n}\n\nexport default Card;","// extracted by mini-css-extract-plugin\nexport default {\"listMovies\":\"RenderMovies_listMovies__WhTju\"};","import { Link } from \"react-router-dom\";\nimport Card from \"../../3COMPONENTS/Card/Card\";\nimport cl from \"./RenderMovies.module.css\";\n\nconst RenderMovies = ({ data }) => {\n    return (\n        <div className={cl.listMovies}>\n            {\n                data.map(movie => {\n                    return (\n                        <Link style={{ textDecoration: 'none', color: '#c7c7c7' }} key={movie.id + movie.title} to={`/filmPage/${movie.title}id${movie.id}`}>\n                            <Card img={movie.img} title={movie.title} inSub={movie.inSub} rating={movie.rating} />\n                        </Link>\n                    );\n                })\n            }\n        </div>\n    );\n};\n\nexport default RenderMovies;","// Переводчик с русского на английский\nexport const TRANSLATOR_RU_TO_EN = {\n    \"Сериалы\": \"Serials\",\n    \"Боевики\": \"Fighters\",\n    \"Комедии\": \"Comedies\",\n    \"Детям\": \"ForChildren\",\n    \"Бесплатно\": \"Free\",\n    \"Тест\": \"Test\",\n    \"Семейные\": \"Family\",\n    \"Мелодрамы\": \"Melodrams\",\n    \"Ужасы\": \"Horrors\",\n    \"Фэнтези\": \"Fantazy\",\n    \"Фантастика\": \"Fantastic\",\n    \"Драмы\": \"Dramas\"\n}\n\n// Переводчик с английского на русский\nexport const TRANSLATOR_EN_TO_RU = {\n    \"Fantazy\": \"Фэнтези\",\n    \"Serials\": \"Сериалы\",\n    \"Fighters\": \"Боевики\",\n    \"Comedies\": \"Комедии\",\n    \"ForChildren\": \"Детям\",\n    \"Free\": \"Бесплатно\",\n    \"Test\": \"Тест\",\n    \"Family\": \"Семейные\",\n    \"Melodrams\": \"Мелодрамы\",\n    \"Horrors\": \"Ужасы\",\n    \"Fantastic\": \"Фантастика\",\n    \"Dramas\": \"Драмы\"\n}\n\n// Количество рендуреемых фильмов\nexport const LIMIT = 30;"],"names":["useThrottle","ms","fc","savedArgs","savedThis","isThrottled","wrapper","arguments","this","apply","setTimeout","CategoryPage","param","useParams","category","TRANSLATOR_RU_TO_EN","data","setData","useState","nextPage","setNextPage","fetching","setFetching","throttle","limit","LIMIT","getData","cat","ref","database","concat","paginationRef","query","limitToFirst","startAt","orderByChild","onValue","snapshot","exists","prev","Object","values","val","handleScrollRequest","Math","max","document","body","scrollHeight","documentElement","offsetHeight","clientHeight","scrollTop","useEffect","window","addEventListener","removeEventListener","_jsxs","_Fragment","children","_jsx","className","cl","categoryPageWrapper","categoryPageWrapperInset","RenderMovies","spinnerWrapper","MainSpinner","loader","_ref","img","title","inSub","rating","cardWrapper","imgWrapper","toString","length","src","alt","cardDescWrapper","titleWrapper","titleShadow","inSubscribe","map","movie","Link","style","textDecoration","color","to","id","Card","TRANSLATOR_EN_TO_RU"],"sourceRoot":""}